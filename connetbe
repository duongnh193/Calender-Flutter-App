PROMPT HOÃ€N CHá»ˆNH Äá»‚ AGENT THá»°C HIá»†N Káº¾T Ná»I FLUTTER FE â†” SPRING BOOT BE

(KHÃ”NG ÄÆ¯á»¢C Sá»¬A UI / RESPONSIVE + DÃ™NG .env + baseURL Genymotion)

â— QUY Táº®C Báº®T BUá»˜C (KHÃ”NG ÄÆ¯á»¢C VI PHáº M)

Tuyá»‡t Ä‘á»‘i khÃ´ng Ä‘Æ°á»£c sá»­a, Ä‘á»•i, xoÃ¡ báº¥t ká»³ pháº§n nÃ o liÃªn quan UI, bao gá»“m:

Widget layout (Column/Row/GridView/Expanded/Containerâ€¦)

Responsive system (breakpoints, enum ScreenSizeClass)

MediaQuery, LayoutBuilder

Theme, color, typography, spacing, radius

File widget hiá»‡n táº¡i Ä‘ang dÃ¹ng cho lá»‹ch ngÃ y/thÃ¡ng

Chá»‰ Ä‘Æ°á»£c phÃ©p:

ThÃªm file má»›i (model, repository, provider, api client, helperâ€¦)

ThÃªm code Ä‘á»ƒ load data tá»« API BE vÃ o UI

ThÃªm viewModel / mapping Ä‘á»ƒ chuyá»ƒn JSON thÃ nh data cho UI

ThÃªm ConsumerWidget/Consumer cho Riverpod

Cháº¡m nháº¹ vÃ o mÃ n hÃ¬nh hiá»‡n táº¡i chá»‰ á»Ÿ má»©c gáº¯n provider vÃ o widget, khÃ´ng thay Ä‘á»•i cáº¥u trÃºc UI.

DÃ¹ng file .env Ä‘á»ƒ config BASE_URL (Genymotion).

KhÃ´ng Ä‘á»•i báº¥t ká»³ class name / tá»• chá»©c file cá»§a UI hiá»‡n cÃ³.

âš™ï¸ YÃŠU Cáº¦U Cáº¦N TRIá»‚N KHAI

TÃ´i muá»‘n FE Flutter káº¿t ná»‘i Ä‘Æ°á»£c vá»›i BE Spring Boot (Ä‘Ã£ cháº¡y OK), gá»“m:

1. CÃ¡c endpoint cáº§n dÃ¹ng

GET /api/v1/calendar/day?date=yyyy-MM-dd

GET /api/v1/calendar/month?year=YYYY&month=MM

(Chuáº©n bá»‹ sáºµn)

GET /api/v1/zodiacs

GET /api/v1/horoscopes/yearly

GET /api/v1/horoscopes/daily

2. JSON thá»±c táº¿ tá»« BE
calendar/day
{
  "solarDate": "2025-02-12",
  "weekday": "WEDNESDAY",
  "lunar": {
    "day": 15,
    "month": 1,
    "year": 2025,
    "leapMonth": false
  },
  "canChi": {
    "day": "NhÃ¢m TÃ½",
    "month": "Máº­u Dáº§n",
    "year": "áº¤t Tá»µ"
  },
  "goodDay": false,
  "note": null,
  "goldenHours": [
    {"branch":"ti","startHour":23,"endHour":1,"label":"23-1h"},
    {"branch":"suu","startHour":1,"endHour":3,"label":"1-3h"}
  ]
}

calendar/month
{
  "year": 2025,
  "month": 12,
  "days": [
    {
      "solarDate": "2025-12-01",
      "dayOfMonth": 1,
      "lunar": { "day": 12, "month": 10, "year": 2025, "leapMonth": true },
      "goodDay": false,
      "special": false
    }
  ]
}

3ï¸âƒ£ Cáº¥u trÃºc code pháº£i táº¡o thÃªm (FE)
A. .env (dÃ¹ng cho Genymotion)

Táº¡o file .env.dev:

BASE_URL=http://10.0.3.2:8080/api/v1


Trong main.dart:

Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await dotenv.load(fileName: ".env.dev");
  runApp(const MyApp());
}

B. AppApi â€“ láº¥y BASE_URL tá»« dotenv

lib/core/constants/app_api.dart:

import 'package:flutter_dotenv/flutter_dotenv.dart';

class AppApi {
  static final String baseUrl = dotenv.env['BASE_URL']!;

  static const String calendarDay = '/calendar/day';
  static const String calendarMonth = '/calendar/month';
  static const String zodiacs = '/zodiacs';
  static const String horoscopeYearly = '/horoscopes/yearly';
  static const String horoscopeDaily = '/horoscopes/daily';
}

C. ApiClient â€“ dÃ¹ng Dio

Táº¡o file:

lib/core/network/api_client.dart

(Agent tá»± viáº¿t chuáº©n, cÃ³ interceptor log)

D. Model mapping JSON â†’ Dart

Táº¡o file model má»›i:

lib/features/calendar/domain/day_info.dart

lib/features/calendar/domain/month_calendar.dart

Format giá»‘ng Ä‘Ãºng JSON BE (Ä‘áº·c biá»‡t key leapMonth).

E. Repository

Táº¡o file:

lib/features/calendar/data/calendar_repository.dart

2 hÃ m:

Future<DayInfo> getDayInfo(DateTime date)
Future<MonthCalendar> getMonthInfo(DateTime month)

F. Riverpod provider

Táº¡o file:

lib/core/di/providers.dart

Providers:

final apiClientProvider = Provider<ApiClient>((ref) => ApiClient());

final calendarRepositoryProvider = Provider<CalendarRepository>((ref) {
  return CalendarRepository(ref.read(apiClientProvider));
});

final dayInfoProvider =
    FutureProvider.family.autoDispose<DayInfo, DateTime>((ref, date) {
  return ref.read(calendarRepositoryProvider).getDayInfo(date);
});

final monthCalendarProvider =
    FutureProvider.family.autoDispose<MonthCalendar, DateTime>((ref, date) {
  return ref.read(calendarRepositoryProvider).getMonthInfo(date);
});

4ï¸âƒ£ Káº¿t ná»‘i vÃ o UI (KHÃ”NG sá»­a layout)

Agent chá»‰ Ä‘Æ°á»£c phÃ©p:

DailyScreen

Convert thÃ nh ConsumerWidget (náº¿u chÆ°a)

Gá»i:

final asyncDay = ref.watch(dayInfoProvider(date));


Map data DayInfo vÃ o viewModel ná»™i bá»™ UI

KhÃ´ng Ä‘á»•i widget tree / layout

MonthScreen

DÃ¹ng:

final asyncMonth = ref.watch(monthCalendarProvider(currentMonthDate));


Map list day vÃ o grid item Ä‘ang cÃ³

KhÃ´ng Ä‘á»•i GridView, spacing, style, responsive

5ï¸âƒ£ Chi tiáº¿t cáº§n Ä‘áº£m báº£o

KhÃ´ng Ä‘á»•i folder ui/, khÃ´ng Ä‘á»•i Widget hiá»‡n Ä‘ang render giao diá»‡n.

KhÃ´ng Ä‘á»•i logic responsive Ä‘Ã£ build (spacing, typography, breakpointsâ€¦)

KhÃ´ng Ä‘á»•i kÃ­ch thÆ°á»›c card, padding, height, alignment.

Chá»‰ bind data tháº­t vÃ o Ä‘Ãºng chá»— Ä‘ang render text.

ğŸ‘‰ Má»¤C TIÃŠU CUá»I

Sau khi agent hoÃ n táº¥t:

âœ” Lá»‹ch ngÃ y

Hiá»ƒn thá»‹ dá»¯ liá»‡u BE:

Ã¢m lá»‹ch

can chi

giá» hoÃ ng Ä‘áº¡o

goodDay

âœ” Lá»‹ch thÃ¡ng

grid hiá»ƒn thá»‹ ngÃ y Ã¢m Ä‘Ãºng

goodDay/special nháº­n tá»« BE

khÃ´ng áº£nh hÆ°á»Ÿng responsive

âœ” KhÃ´ng thay Ä‘á»•i UI cÅ©

100% layout giá»¯ nguyÃªn.
