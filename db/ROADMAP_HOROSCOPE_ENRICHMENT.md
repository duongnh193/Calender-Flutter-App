# Roadmap: LÃ m phong phÃº dá»¯ liá»‡u tá»­ vi (80% so vá»›i máº«u)

## ğŸ“Š PhÃ¢n tÃ­ch chÃªnh lá»‡ch

### Hiá»‡n tráº¡ng
- **Script generate**: Text Ä‘Æ¡n giáº£n, láº·p láº¡i, chá»‰ cÃ³ 1 template
- **Daily horoscope**: Giá»‘ng nhau cho má»i ngÃ y
- **Schema**: Chá»‰ cÃ³ cÃ¡c field cÆ¡ báº£n (overview, career, love, health, fortune)
- **Metadata**: Ráº¥t Ã­t, chá»‰ cÃ³ generated_by, lucky_color, lucky_number

### Máº«u yÃªu cáº§u (tá»« screenshots)

#### Lifetime Horoscope cáº§n cÃ³:
1. **Tá»•ng quÃ¡t** - Äoáº¡n vÄƒn dÃ i, cÃ³ thÆ¡ ca
2. **TÃ¬nh duyÃªn** - PhÃ¢n nhÃ³m theo thÃ¡ng sinh (3 nhÃ³m khÃ¡c nhau)
3. **Gia Ä‘Ã¬nh sá»± nghiá»‡p** - Nhiá»u Ä‘oáº¡n vÄƒn, cÃ³ dá»± Ä‘oÃ¡n theo Ä‘á»™ tuá»•i (30, 36, 37+)
4. **TÃ i váº­n** - Chi tiáº¿t vá» tÃ i chÃ­nh
5. **Tuá»•i há»£p lÃ m Äƒn** - Danh sÃ¡ch cá»¥ thá»ƒ cÃ¡c tuá»•i há»£p
6. **NÄƒm khÃ³ khÄƒn nháº¥t** - Liá»‡t kÃª cÃ¡c nÄƒm cá»¥ thá»ƒ (26, 29, 33, 40)
7. **NgÃ y giá» xuáº¥t hÃ nh há»£p nháº¥t** - HÆ°á»›ng, giá», ngÃ y cá»¥ thá»ƒ
8. **Diá»…n biáº¿n tá»«ng nÄƒm** - Chi tiáº¿t tá»«ng Ä‘á»™ tuá»•i (26-29, 30-35, 36-40, 41-45, 51-60)
9. **Tuá»•i Ä‘áº¡i ká»µ** - Danh sÃ¡ch cÃ¡c tuá»•i xung kháº¯c
10. **Nghi lá»… cÃºng sao** - HÆ°á»›ng dáº«n chi tiáº¿t vá» nghi lá»…, mÃ u sáº¯c, giá»
11. **Metadata**: Cung, XÆ°Æ¡ng, TÆ°á»›ng tinh, Máº¡ng, Con nhÃ , Äá»™ máº¡ng

#### Yearly Horoscope cáº§n cÃ³:
1. **Cung Má»‡nh** - Danh sÃ¡ch sao, giáº£i thÃ­ch chi tiáº¿t
2. **Cung Xung Chiáº¿u** - Sao vÃ  áº£nh hÆ°á»Ÿng
3. **Cung Tam Há»£p** - Sao vÃ  lá»i khuyÃªn
4. **Cung Nhá»‹ Há»£p** - Sao vÃ  cáº£nh bÃ¡o
5. **Váº­n háº¡n** - Háº¡n nÄƒm, háº¡n tuá»•i, cÃ¡ch hÃ³a giáº£i
6. **Tá»© trá»¥** - Tá»•ng quan, cÃ´ng viá»‡c, tÃ i chÃ­nh, sá»©c khá»e
7. **Luáº­n giáº£i theo phÆ°Æ¡ng diá»‡n** - CÃ´ng danh, TÃ i chÃ­nh, TÃ¬nh duyÃªn, Sá»©c khá»e, Ngoáº¡i giao
8. **Dá»± Ä‘oÃ¡n theo thÃ¡ng** - Chi tiáº¿t tá»«ng thÃ¡ng (1-12)
9. **Phong thá»§y may máº¯n** - NgÆ°á»i xÃ´ng nhÃ , ngÃ y xuáº¥t hÃ nh, ngÃ y khai trÆ°Æ¡ng
10. **Q&A format** - Sinh con, lÃ m Äƒn vá»›i tuá»•i nÃ o, xÃ¢y nhÃ , mua xe
11. **Lá»i káº¿t** - Tá»•ng há»£p nhiá»u khÃ­a cáº¡nh
12. **Metadata**: Sao háº¡n, mÃ u sáº¯c há»£p/ká»µ, ngÅ© hÃ nh nÄƒm

#### Monthly Horoscope cáº§n cÃ³:
- Chi tiáº¿t tá»«ng thÃ¡ng vá»›i nhiá»u khÃ­a cáº¡nh: tÃ i chÃ­nh, cÃ´ng viá»‡c, gia Ä‘Ã¬nh, sá»©c khá»e
- Má»—i thÃ¡ng cÃ³ variation khÃ¡c nhau (khÃ´ng láº·p láº¡i)

#### Daily Horoscope cáº§n cÃ³:
- Variation theo ngÃ y (khÃ´ng giá»‘ng nhau)
- Chi tiáº¿t hÆ¡n vá» career, love, health, fortune

## ğŸ¯ Má»¥c tiÃªu: Äáº¡t 80% so vá»›i máº«u

### PhÆ°Æ¡ng Ã¡n triá»ƒn khai

#### Giai Ä‘oáº¡n 1: Má»Ÿ rá»™ng Schema vÃ  Metadata (Tuáº§n 1-2)
- Sá»­ dá»¥ng `metadata` JSON Ä‘á»ƒ lÆ°u structured content
- Táº¡o migration Ä‘á»ƒ thÃªm cÃ¡c field má»›i náº¿u cáº§n
- Cáº­p nháº­t script generate Ä‘á»ƒ populate metadata Ä‘áº§y Ä‘á»§

#### Giai Ä‘oáº¡n 2: Cáº£i tiáº¿n Script Generate (Tuáº§n 3-4)
- Táº¡o 30+ template Ä‘a dáº¡ng cho má»—i loáº¡i content
- Variation dá»±a trÃªn zodiac, can-chi, ngÃ y thÃ¡ng
- Seed-based generation Ä‘á»ƒ Ä‘áº£m báº£o consistency nhÆ°ng váº«n Ä‘a dáº¡ng

#### Giai Ä‘oáº¡n 3: TÃ­ch há»£p AI (Optional, Tuáº§n 5-6)
- Sá»­ dá»¥ng GPT-4/Claude Ä‘á»ƒ generate ná»™i dung tá»± nhiÃªn
- Batch generation Ä‘á»ƒ tá»‘i Æ°u chi phÃ­
- Cache káº¿t quáº£

## ğŸ“ Cáº¥u trÃºc file sáº½ táº¡o

```
db/
â”œâ”€â”€ ROADMAP_HOROSCOPE_ENRICHMENT.md (file nÃ y)
â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ V4__extend_horoscope_metadata.sql (má»Ÿ rá»™ng schema náº¿u cáº§n)
â”œâ”€â”€ generate_horoscopes_improved.py (script cáº£i tiáº¿n vá»›i nhiá»u template)
â”œâ”€â”€ generate_horoscopes_ai.py (script tÃ­ch há»£p AI)
â””â”€â”€ templates/
    â”œâ”€â”€ lifetime_templates.py (30+ template cho lifetime)
    â”œâ”€â”€ yearly_templates.py (30+ template cho yearly)
    â”œâ”€â”€ monthly_templates.py (30+ template cho monthly)
    â””â”€â”€ daily_templates.py (30+ template cho daily)
```

## ğŸ”§ Chi tiáº¿t triá»ƒn khai

### 1. Metadata Structure

Metadata sáº½ Ä‘Æ°á»£c lÆ°u dÆ°á»›i dáº¡ng JSON vá»›i cáº¥u trÃºc:

```json
{
  "generated_by": "gen_v2_improved",
  "sections": {
    "tong_quat": "...",
    "tinh_duyen": {
      "group1": "...",
      "group2": "...",
      "group3": "..."
    },
    "gia_dinh_su_nghiep": "...",
    "tai_van": "...",
    "tuoi_hop_lam_an": ["Canh ThÃ¬n", "BÃ­nh Tuáº¥t", ...],
    "nam_kho_khan": [26, 29, 33, 40],
    "dien_bien_tung_nam": {
      "26-29": "...",
      "30-35": "...",
      ...
    },
    "tuoi_dai_ky": ["QuÃ½ MÃ¹i", "GiÃ¡p ThÃ¢n", ...],
    "nghi_le": {
      "ngay": 25,
      "gio": "19h-21h",
      "huong": "ÄÃ´ng",
      "mau_sac": "xanh",
      "so_den": 20
    }
  },
  "astrology": {
    "cung": "CÃ€N",
    "xuong": "CON Rá»’NG",
    "tuong_tinh": "CON Láº C ÄÃ€",
    "mang": "Báº CH Láº P KIM",
    "con_nha": "Báº CH Äáº¾",
    "do_mang": "Ã”ng Quan Äáº¿ Ä‘á»™ máº¡ng"
  },
  "yearly_sections": {
    "cung_menh": {
      "stars": ["ÄÃ o Hoa", "Äáº¡i Hao", ...],
      "interpretation": "..."
    },
    "cung_xung_chieu": {...},
    "cung_tam_hop": {...},
    "van_han": {
      "han_nam": "...",
      "han_tuoi": "...",
      "hoa_giai": "..."
    },
    "tu_tru": {
      "tong_quan": "...",
      "cong_viec": "...",
      "tai_chinh": "...",
      "suc_khoe": "..."
    },
    "phong_thuy": {
      "nguoi_xong_nha": "1994",
      "ngay_xuat_hanh": "mÃ¹ng 9 Ã¢m lá»‹ch",
      "huong": "TÃ¢y, TÃ¢y Nam",
      "ngay_khai_truong": "..."
    },
    "qa": [
      {"question": "...", "answer": "..."},
      ...
    ]
  },
  "monthly_details": {
    "1": {"tai_chinh": "...", "cong_viec": "...", "gia_dinh": "...", "suc_khoe": "..."},
    "2": {...},
    ...
  }
}
```

### 2. Template System

Má»—i loáº¡i horoscope sáº½ cÃ³ 30+ template khÃ¡c nhau, Ä‘Æ°á»£c chá»n dá»±a trÃªn:
- Zodiac code (hash-based selection)
- Can-Chi combination
- Year (cho yearly/monthly/daily)
- Day of year (cho daily)

### 3. AI Integration

Script AI sáº½:
- Sá»­ dá»¥ng OpenAI GPT-4 hoáº·c Anthropic Claude
- Generate content theo batch Ä‘á»ƒ tá»‘i Æ°u chi phÃ­
- Cache káº¿t quáº£ vÃ o database
- Fallback vá» template-based náº¿u AI fail

## ğŸ“ˆ Káº¿t quáº£ mong Ä‘á»£i

Sau khi triá»ƒn khai:
- **Lifetime**: 10+ sections vá»›i ná»™i dung Ä‘a dáº¡ng
- **Yearly**: 8+ sections vá»›i chi tiáº¿t Ä‘áº§y Ä‘á»§
- **Monthly**: Variation theo thÃ¡ng, khÃ´ng láº·p láº¡i
- **Daily**: Variation theo ngÃ y, khÃ´ng giá»‘ng nhau
- **Metadata**: Äáº§y Ä‘á»§ thÃ´ng tin astrological

## âš ï¸ LÆ°u Ã½

1. **Chi phÃ­ AI**: Náº¿u dÃ¹ng AI, cáº§n tÃ­nh toÃ¡n chi phÃ­ (khoáº£ng $0.01-0.05 per horoscope)
2. **Thá»i gian generate**: Vá»›i AI, thá»i gian sáº½ lÃ¢u hÆ¡n (cáº§n rate limiting)
3. **Quality control**: Cáº§n review má»™t sá»‘ sample Ä‘á»ƒ Ä‘áº£m báº£o cháº¥t lÆ°á»£ng
4. **Backward compatibility**: Äáº£m báº£o frontend váº«n hoáº¡t Ä‘á»™ng vá»›i data cÅ©
